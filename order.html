<!doctype html>
<html lang="bg">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Поръчка — Eclipse Solar Blinds</title>
  <link rel="stylesheet" href="style.css">
  <link rel="icon" type="image/png" href="images/favicon.png">

  <style>
    .step {
      display: none;
      text-align: center;
      opacity: 0;
      transform: translateY(15px);
      transition: opacity 0.5s ease, transform 0.5s ease;
    }
    .step.active {
      display: block;
      opacity: 1;
      transform: translateY(0);
    }
    .quiz h3 { 
      margin-bottom: 15px; 
      font-size: 1.3em;
      color: #333;
    }
    .quiz label { 
      display: block; 
      margin: 10px 0; 
      cursor: pointer;
      font-size: 1.1em;
      color: #444;
    }
    .quiz input[type="radio"],
    .quiz input[type="number"] {
      margin-right: 8px;
    }
    .nav-buttons {
      display: flex;
      justify-content: space-between;
      margin-top: 20px;
    }
    .nav-buttons .btn {
      min-width: 120px;
    }
    .result {
      margin-top: 25px;
      padding: 15px;
      background: #f1f1f1;
      border-radius: 10px;
      text-align: center;
      font-size: 1.2em;
      color: #333;
    }
    .result strong {
      color: #4caf50;
      font-size: 1.4em;
    }
    .window-inputs {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 10px;
      margin-bottom: 10px;
      flex-wrap: wrap;
    }
    .window-inputs input {
      width: 100px;
      padding: 5px;
      border-radius: 5px;
      border: 1px solid #ccc;
    }
    .add-window {
      background: #4caf50;
      color: #fff;
      border: none;
      border-radius: 50%;
      width: 30px;
      height: 30px;
      cursor: pointer;
      font-size: 20px;
      transition: 0.3s;
    }
    .add-window:hover { background: #45a049; }

    .site-notice {
      background-color: #d32f2f;
      color: #fff;
      text-align: center;
      padding: 10px 40px;
      font-size: 0.95em;
      position: relative;
      font-weight: 500;
      animation: fadeIn 0.8s ease;
    }
    .site-notice button {
      position: absolute;
      right: 12px;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(255,255,255,0.2);
      border: none;
      color: #fff;
      font-size: 18px;
      cursor: pointer;
      padding: 0 8px;
      border-radius: 4px;
      transition: background 0.3s ease;
    }
    .site-notice button:hover { background: rgba(255,255,255,0.35); }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(-5px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>

<body>
  <div class="social-bar">
  <a href="https://www.facebook.com/people/Соларни-щори-Eclipse/61582142675145/?mibextid=wwXIfr&rdid=zWy7yOrU32rBTQrZ&share_url=https%3A%2F%2Fwww.facebook.com%2Fshare%2F1Z3MopANBD%2F%3Fmibextid%3DwwXIfr" target="_blank" class="social-icon fb" title="Facebook">
    <img src="images/facebook.svg" alt="Facebook">
  </a>
  <a href="https://www.instagram.com/eclipsesolarblinds?igsh=MXNscTJiYjN6NHY5bA%3D%3D&utm_source=qr" target="_blank" class="social-icon ig" title="Instagram">
    <img src="images/instagram.svg" alt="Instagram">
  </a>
  <a href="https://www.tiktok.com/@eclipse_solar_bli?_r=1&_t=ZN-912cCXlW5Ti" target="_blank" class="social-icon ig" title="Tik Tok">
    <img src="images/tiktok.svg" alt="Tik Tok">
  </a>
</div>
  <div class="site-notice" id="siteNotice">
    ⚠️ Това е ученически проект, създаден с образователна цел. Информацията не представлява реална оферта.
    <button id="closeNotice">×</button>
  </div>

  <header class="wrap">
    <a href="index.html" class="brand">
      <img src="logo.png" alt="Eclipse Solar Blinds">
      <span>Eclipse Solar Blinds</span>
    </a>
    <nav>
      <a href="index.html">Начало</a>
      <a href="products.html">Продукти</a>
      <a href="order.html" class="active">Поръчка</a>
      <a href="about.html">За нас</a>
      <a href="contact.html">Контакти</a>
    </nav>
  </header>

  <main class="wrap">
    <h1>Ориентировъчна цена</h1>
    <div class="card" style="text-align: center;">
      <p>Попълнете въпросите и ще получите цена и възвръщаемост.</p>

      <form id="quizForm" class="quiz">

        <!-- Тип щори -->
        <div class="step active">
          <h3>1. Какъв тип продукт желаете?</h3>
          <label><input type="radio" name="type" value="300"> Соларен навес </label>
          <label><input type="radio" name="type" value="650"> Ролетни външни</label>
          <label><input type="radio" name="type" value="400"> Хоризонтални вътрешни</label>
          <label><input type="radio" name="type" value="500"> Вертикални вътрешни</label>
        </div>

        <!-- Прозорци и размери -->
        <div class="step">
          <h3>2. Въведете размерите на вашите прозорци (ширина × височина в метри)</h3>
          <div id="windowsContainer">
            <div class="window-inputs">
              <input type="number" step="0.01" placeholder="Ширина" class="width">
              <input type="number" step="0.01" placeholder="Височина" class="height">
            </div>
          </div>
          <button type="button" class="add-window" onclick="addWindow()">+</button>
          <p id="totalArea" style="margin-top:10px; font-weight:bold;"></p>
        </div>

        <!-- Автоматизация -->
        <div class="step">
          <h3>3. Желаете ли автоматизация?</h3>
          <label><input type="radio" name="auto" value="0"> Не</label>
          <label><input type="radio" name="auto" value="250"> Да</label>
        </div>

        <!-- Smart Home -->
        <div class="step">
          <h3>4. Желаете ли интеграция със Smart Home?</h3>
          <label><input type="radio" name="smart" value="0"> Не</label>
          <label><input type="radio" name="smart" value="150"> Да</label>
        </div>

        <!-- Сметка за ток -->
        <div class="step">
          <h3>5. Каква е приблизителната ви месечна сметка за ток?</h3>
          <input type="number" id="electricBill" placeholder="лв." style="padding:8px; width:200px;">
        </div>

        <!-- Финален резултат -->
        <div class="step">
          <h3>6. Резултат</h3>
          <p>След изчисление ще видите ориентировъчната цена и възвръщаемостта.</p>
        </div>

        <!-- Бутони -->
        <div class="nav-buttons">
          <button type="button" class="btn ghost" id="prevBtn">Назад</button>
          <button type="button" class="btn" id="nextBtn">Напред</button>
        </div>
      </form>

      <div id="result" class="result">Попълнете въпросите, за да получите резултат.</div>
    </div>
  </main>

  <footer>
    <img src="logo.png" alt="Eclipse Solar Blinds">
    © 2025 Eclipse Solar Blinds — Всички права запазени.
  </footer>

  <script>
    const steps = document.querySelectorAll(".step");
    let currentStep = 0;
    const resultDiv = document.getElementById("result");
    const prevBtn = document.getElementById("prevBtn");
    const nextBtn = document.getElementById("nextBtn");

    function showStep(n) {
      steps.forEach((s, i) => {
        s.classList.remove("active");
        if (i === n) s.classList.add("active");
      });
      prevBtn.style.visibility = n === 0 ? "hidden" : "visible";
      nextBtn.textContent = n === steps.length - 1 ? "Изчисли" : "Напред";
    }

    function addWindow() {
      const container = document.getElementById("windowsContainer");
      const div = document.createElement("div");
      div.className = "window-inputs";
      div.innerHTML = `
        <input type="number" step="0.01" placeholder="Ширина" class="width">
        <input type="number" step="0.01" placeholder="Височина" class="height">
      `;
      container.appendChild(div);
    }

    function calculateTotalArea() {
      const widths = document.querySelectorAll(".width");
      const heights = document.querySelectorAll(".height");
      let total = 0;
      widths.forEach((w, i) => {
        const width = parseFloat(w.value) || 0;
        const height = parseFloat(heights[i].value) || 0;
        total += width * height;
      });
      document.getElementById("totalArea").innerText = `Обща площ: ${total.toFixed(2)} м²`;
      return total;
    }

    function calculateResults() {
      const form = new FormData(document.getElementById("quizForm"));
      const type = parseFloat(form.get("type")) || 0;
      const auto = parseFloat(form.get("auto")) || 0;
      const smart = parseFloat(form.get("smart")) || 0;
      const area = calculateTotalArea();
      const bill = parseFloat(document.getElementById("electricBill").value) || 0;

      // цена
      let total = (type + auto + smart) * (area || 1);
      const euro = (total / 1.95).toFixed(2);

      // възвръщаемост
      const savingsPercent = Math.min(30, area * 2);
      const monthlySavings = bill * savingsPercent / 100;
      const paybackMonths = (total / monthlySavings).toFixed(1);
      const paybackYears = (paybackMonths / 12).toFixed(1);

      resultDiv.innerHTML = `
        💰 Ориентировъчна цена: <strong>${total.toFixed(2)} лв.</strong> (~${euro} €)<br>
        ⚡ Потенциално спестяване: ~${savingsPercent}% (${monthlySavings.toFixed(2)} лв./месец)<br>
        ⏳ Възвръщаемост: ~${paybackYears} години (${paybackMonths} месеца)
      `;
    }

    nextBtn.addEventListener("click", () => {
      if (currentStep === 1) calculateTotalArea();
      if (currentStep < steps.length - 1) {
        currentStep++;
        showStep(currentStep);
      } else {
        calculateResults();
      }
    });
    prevBtn.addEventListener("click", () => {
      if (currentStep > 0) {
        currentStep--;
        showStep(currentStep);
      }
    });

    document.addEventListener("input", e => {
      if (e.target.classList.contains("width") || e.target.classList.contains("height"))
        calculateTotalArea();
    });

    showStep(currentStep);

    document.getElementById("closeNotice").addEventListener("click", () => {
      const notice = document.getElementById("siteNotice");
      notice.style.opacity = '0';
      notice.style.transform = 'translateY(-10px)';
      setTimeout(() => notice.style.display = 'none', 400);
    });
  </script>
</body>
</html>
